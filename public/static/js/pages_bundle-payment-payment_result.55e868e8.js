(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages_bundle-payment-payment_result"],{"0ab5":function(e,t,r){"use strict";var a=r("5ba8"),n=r.n(a);n.a},"1a4b":function(e,t,r){"use strict";r.d(t,"b",(function(){return n})),r.d(t,"c",(function(){return o})),r.d(t,"a",(function(){return a}));var a={uIcon:r("82f1").default,uButton:r("15e4").default},n=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("v-uni-view",{staticClass:"payment-result"},[2===e.progressStatus?r("v-uni-view",{staticClass:"payment-success"},[r("v-uni-view",{staticClass:"flex flex-col flex-center"},[r("u-icon",{attrs:{color:"#11E69E",name:"checkmark-circle-fill",size:200}}),r("v-uni-view",{staticClass:"font-size-42 f-w-500 primary"},[e._v("支付成功")])],1),r("v-uni-view",{staticClass:"payment-info"},[r("v-uni-view",{staticClass:"info-item"},[r("v-uni-view",{staticClass:"muted"},[e._v("就餐人：")]),r("v-uni-view",[e._v(e._s(e.resultInfo.name))])],1),r("v-uni-view",{staticClass:"info-item"},[r("v-uni-view",{staticClass:"muted"},[e._v("支付总金额：")]),r("v-uni-view",[e._v("￥"+e._s(e.resultInfo.pay_total_fee/100))])],1),r("v-uni-view",{staticClass:"info-item"},[r("v-uni-view",{staticClass:"muted"},[e._v("线上支付金额：")]),r("v-uni-view",[e._v("￥"+e._s(e.resultInfo.pay_fee/100))])],1),r("v-uni-view",{staticClass:"info-item"},[r("v-uni-view",{staticClass:"muted"},[e._v("线上支付订单号：")]),r("v-uni-view",{staticClass:"flex flex-center"},[e._v(e._s(e.resultInfo.trade_no)),r("u-icon",{attrs:{color:"#999",name:"arrow-right",size:28}})],1)],1),r("v-uni-view",{staticClass:"info-item"},[r("v-uni-view",{staticClass:"muted"},[e._v("下单时间：")]),r("v-uni-view",[e._v(e._s(e.resultInfo.pay_time))])],1)],1),r("v-uni-view",{on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.gotoOrder.apply(void 0,arguments)}}},[r("u-button",{attrs:{shape:"circle",color:"linear-gradient(90deg, #A9FED5 0%, #11E69E 0%, #11E69E 0%, #11E6C5 100%, #11E6C5 100%)",text:"确定"}})],1)],1):1===e.progressStatus?r("v-uni-view",{staticClass:"payment-fail m-t-50"},[r("v-uni-view",{staticClass:"flex flex-col flex-center"},[r("u-icon",{attrs:{color:"#11E69E",name:"clock-fill",size:150}}),r("v-uni-view",{staticClass:"font-size-38 f-w-500 primary m-t-30"},[e._v("查询中")])],1)],1):3===e.progressStatus?r("v-uni-view",{staticClass:"payment-fail m-t-50"},[r("v-uni-view",{staticClass:"flex flex-col flex-center"},[r("u-icon",{attrs:{color:"red",name:"close-circle",size:150}}),r("v-uni-view",{staticClass:"font-size-38 f-w-100 red m-t-30"},[e._v(e._s(e.progressText))])],1)],1):e._e()],1)},o=[]},"29a5":function(e,t,r){"use strict";r.r(t);var a=r("37dd"),n=r.n(a);for(var o in a)"default"!==o&&function(e){r.d(t,e,(function(){return a[e]}))}(o);t["default"]=n.a},"35ac":function(e,t,r){"use strict";r.r(t);var a=r("1a4b"),n=r("29a5");for(var o in n)"default"!==o&&function(e){r.d(t,e,(function(){return n[e]}))}(o);r("0ab5");var i,s=r("f0c5"),u=Object(s["a"])(n["default"],a["b"],a["c"],!1,null,"7108dd22",null,!1,a["a"],i);t["default"]=u.exports},"36cd":function(e,t,r){"use strict";var a=r("4ea4");Object.defineProperty(t,"__esModule",{value:!0}),t.getApicardEnable=t.queryOrderInfo=t.getThirdSetting=t.thirdLogin=t.createApiThirdRecharge=t.getApiCardUnbind=t.getApiCardLoss=t.getApiCancelLogoutRecord=t.getApiAddLogoutRecord=t.getApiLogoutRecord=t.apiGetUserInfoList=t.getApiUserSwitchFacepay=t.getApiUploadUserFace=t.getApiUploadFileGetOssToken=t.getApiUserWalletList=t.apiReservationGetOrderPay=t.apiGetPayMethodList=t.getApiGenerateEaccountCode=t.apiGetCanteenList=t.apiReservationOrderCreate=t.apiProjectList=t.apiMonthReservationOrderDetailInfo=t.apiMonthReservationOrder=t.apiGetWechatUserInfo=t.apiGetReservationStallFood=t.apiGenerateEaccountCode=t.apiCreateCardInfo=t.apiCollectionReservationOrder=t.apiCardUserOrWechatUserInfoSave=t.apiBindProjectPoint=t.apiQueryUserinfo=t.getApiRechargeOrderQuery=t.getApiRechargeOrderCreate=t.getApiRechargeGetSettings=t.getApiRechargeWalletList=void 0;var n=a(r("3c62")),o=function(e){return n.default.post("/booking/recharge/wallet_list",e)};t.getApiRechargeWalletList=o;var i=function(e){return n.default.post("/booking/recharge/get_settings",e)};t.getApiRechargeGetSettings=i;var s=function(e){return n.default.post("/booking/recharge/order_create",e)};t.getApiRechargeOrderCreate=s;var u=function(e){return n.default.post("/booking/recharge/order_query",e)};t.getApiRechargeOrderQuery=u;var d=function(e){return n.default.post("/booking/login/query_userinfo",e)};t.apiQueryUserinfo=d;var c=function(e){return n.default.post("/booking/user/bind_project_point",e)};t.apiBindProjectPoint=c;var l=function(e){return n.default.post("/booking/user/card_user_or_wechat_user_info_save",e)};t.apiCardUserOrWechatUserInfoSave=l;var f=function(e){return n.default.post("/booking/reservation/collection_reservation_order",e)};t.apiCollectionReservationOrder=f;var p=function(e){return n.default.post("/booking/user/create_card_info",e)};t.apiCreateCardInfo=p;var v=function(e){return n.default.post("/booking/user/generate_eaccount_code",e)};t.apiGenerateEaccountCode=v;var g=function(e){return n.default.post("/booking/reservation/get_reservation_stall_food",e)};t.apiGetReservationStallFood=g;var _=function(e){return n.default.post("/booking/user/get_wechat_user_info",e)};t.apiGetWechatUserInfo=_;var h=function(e){return n.default.post("/booking/reservation/month_reservation_order",e)};t.apiMonthReservationOrder=h;var y=function(e){return n.default.post("/booking/reservation/month_reservation_order_detail_info",e)};t.apiMonthReservationOrderDetailInfo=y;var b=function(e){return n.default.post("/booking/user/project_list",e)};t.apiProjectList=b;var m=function(e){return n.default.post("/booking/reservation/reservation_order_create",e)};t.apiReservationOrderCreate=m;var C=function(e){return n.default.post("/booking/user/get_canteen_list",e)};t.apiGetCanteenList=C;var w=function(e){return n.default.post("/booking/user/generate_eaccount_code",e)};t.getApiGenerateEaccountCode=w;var k=function(e){return n.default.post("/booking/user/get_pay_method_list",e)};t.apiGetPayMethodList=k;var R=function(e){return n.default.post("/booking/reservation/reservation_order_pay",e)};t.apiReservationGetOrderPay=R;var A=function(e){return n.default.post("/booking/user/get_user_wallet_list",e)};t.getApiUserWalletList=A;var O=function(e){return n.default.post("/booking/upload_file/get_oss_token",e)};t.getApiUploadFileGetOssToken=O;var L=function(e){return n.default.post("/booking/user/upload_user_face",e)};t.getApiUploadUserFace=L;var I=function(e){return n.default.post("/booking/user/switch_facepay",e)};t.getApiUserSwitchFacepay=I;var U=function(e){return n.default.post("/booking/user/get_user_info_list",e)};t.apiGetUserInfoList=U;var q=function(e){return n.default.post("/booking/user/logout_record",e)};t.getApiLogoutRecord=q;var E=function(e){return n.default.post("/booking/user/add_logout_record",e)};t.getApiAddLogoutRecord=E;var S=function(e){return n.default.post("/booking/user/cancel_logout_record",e)};t.getApiCancelLogoutRecord=S;var G=function(e){return n.default.post("/booking/user/card_loss",e)};t.getApiCardLoss=G;var x=function(e){return n.default.post("/booking/user/card_unbind",e)};t.getApiCardUnbind=x;var P=function(e){return n.default.post("/booking/user_order/order_create",e)};t.createApiThirdRecharge=P;var T=function(e){return n.default.post("/booking/user_order/h5_login_verify",e)};t.thirdLogin=T;var H=function(e){return n.default.post("/booking/user_order/get_settings",e)};t.getThirdSetting=H;var j=function(e){return n.default.post("/booking/user_order/get_order_info",e)};t.queryOrderInfo=j;var F=function(e){return n.default.post("/booking/user/card_enable",e)};t.getApicardEnable=F},"37dd":function(e,t,r){"use strict";r("ac1f"),r("5319"),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=r("36cd"),n={data:function(){return{resultInfo:{},paymentOrderType:"",tradeNo:"",progressStatus:1,progressText:"查询失败，请联系客服",queryHandle:null}},methods:{queryResult:function(){var e=this;this.$showLoading({title:"查询中....",mask:!0}),this.queryHandle=setInterval((function(){e.queryPayResult()}),1e3)},queryPayResult:function(){var e=this;this.tradeNo?(0,a.queryOrderInfo)({trade_no:this.tradeNo}).then((function(t){console.log("pay_result",t),0===t.code?"ORDER_SUCCESS"===t.data.order_status&&(e.progressStatus=2,e.resultInfo=t.data,uni.hideLoading(),e.queryHandle&&clearInterval(e.queryHandle)):(e.progressStatus=3,uni.hideLoading(),e.queryHandle&&clearInterval(e.queryHandle),e.progressText=t.msg,uni.$u.toast(t.msg))})).catch((function(t){e.progressStatus=3,uni.hideLoading(),e.queryHandle&&clearInterval(e.queryHandle)})):(uni.hideLoading(),uni.$u.toast("订单号不能为空！"),this.queryHandle&&clearInterval(this.queryHandle))},gotoOrder:function(){var e;"reservation"===this.paymentOrderType?e="/pages_bundle/appoint/user_appoint":"report_meal"===this.paymentOrderType&&(e="/pages_bundle/meal_report/user_meal_report"),this.$miRouter.replace({path:e})}},onShow:function(){},onLoad:function(e){this.tradeNo=this.$Route.query.out_trade_no||this.$Route.query.trade_no,this.paymentOrderType=this.$store.state.appoint.select.payment_order_type,this.tradeNo&&this.queryResult(),this.progressStatus=1},onUnload:function(){this.queryHandle&&clearInterval(this.queryHandle)}};t.default=n},"5ba8":function(e,t,r){var a=r("d42a");"string"===typeof a&&(a=[[e.i,a,""]]),a.locals&&(e.exports=a.locals);var n=r("4f06").default;n("243baf2e",a,!0,{sourceMap:!1,shadowMode:!1})},d42a:function(e,t,r){var a=r("24fb");t=a(!1),t.push([e.i,'@charset "UTF-8";\n/* 颜色变量 */uni-page-body[data-v-7108dd22]{background-color:#fff}.payment-result[data-v-7108dd22]{padding:%?20?% %?70?%}.payment-result .payment-info[data-v-7108dd22]{margin-bottom:%?30?%}.payment-result .payment-info .info-item[data-v-7108dd22]{display:flex;justify-content:space-between;font-size:%?30?%;padding:%?30?% 0}.payment-result .payment-info .info-item[data-v-7108dd22]:not(:last-of-type){border-bottom:1px solid #efefef}body.?%PAGE?%[data-v-7108dd22]{background-color:#fff}',""]),e.exports=t}}]);