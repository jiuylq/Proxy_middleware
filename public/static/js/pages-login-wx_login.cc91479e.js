(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-login-wx_login"],{"19cc":function(e,t,n){"use strict";var o=n("43ec"),i=n.n(o);i.a},"1cad":function(e,t,n){"use strict";n.d(t,"b",(function(){return i})),n.d(t,"c",(function(){return a})),n.d(t,"a",(function(){return o}));var o={uButton:n("15e4").default},i=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-uni-view",{staticClass:"login flex flex-col"},[n("v-uni-view",{staticClass:"wx-login flex flex-col col-center"},[n("v-uni-view",{staticClass:"avatar"},[n("v-uni-open-data",{attrs:{type:"userAvatarUrl"}})],1),n("v-uni-view",{staticClass:"user-name mt20"},[n("v-uni-open-data",{attrs:{type:"userNickName"}})],1),n("v-uni-view",{staticClass:"login-btn"},[n("u-button",{attrs:{text:"一键登录",shape:"circle",color:"linear-gradient(90deg,  #11E69E 0%, #11E6C5 100%)","open-type":"getPhoneNumber"},on:{getphonenumber:function(t){arguments[0]=t=e.$handleEvent(t),e.getPhoneNumber.apply(void 0,arguments)}}}),n("v-uni-view",{staticClass:"primary m-t-30 text-center"},[n("router-link",{attrs:{to:"/pages/login/login","nav-type":"replace"}},[n("v-uni-text",[e._v("手机号登录")])],1)],1)],1)],1)],1)},a=[]},"43ec":function(e,t,n){var o=n("cf8e");"string"===typeof o&&(o=[[e.i,o,""]]),o.locals&&(e.exports=o.locals);var i=n("4f06").default;i("d623a840",o,!0,{sourceMap:!1,shadowMode:!1})},8122:function(e,t,n){"use strict";var o=n("4ea4");n("d3b7"),n("ac1f"),n("5319"),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=o(n("5530")),a=n("d2bc"),r=n("26cb"),s={data:function(){return{}},methods:(0,i.default)((0,i.default)({},(0,r.mapMutations)(["SETCOOKIE","USERINFO","setProjectCardUserList"])),{},{getAuthCode:function(e){uni.getProvider({service:"oauth",success:function(t){uni.login((0,i.default)((0,i.default)({},e),{},{provider:t.provider[0],success:function(e){var t=e.code;console.log("一键登录code",t),(0,a.apiWechatAuth)({code:t}).then((function(e){0!==e.code&&uni.$u.toast(e.msg)}))}}))}})},getPhoneNumber:function(e){e.detail&&e.detail.code?this.wechatPLogin(e.detail.code):uni.$u.toast("获取手机号失败")},wechatPLogin:function(e){var t=this;this.$showLoading({title:"加载中...",mask:!0}),(0,a.apiWechatPhoneLogin)({code:e}).then((function(e){uni.hideLoading(),t.loginHandle(e)})).finally((function(e){uni.hideLoading()}))},loginHandle:function(e){var t=e.data;this.USERINFO(t),this.checkInfo(e)},checkInfo:function(e){if(e.data.person_no)this.$miRouter.replaceAll({path:"/pages/index/index"});else{var t={company_id:e.data.company_id,user_id:e.data.user_id};this.getBindProjectCardUserList(t)}},getBindProjectCardUserList:function(e){var t=this;this.$showLoading({title:"获取项目点....",mask:!0}),(0,a.getApiBindProjectCardUserList)(e).then((function(e){if(0==e.code)if(uni.hideLoading(),e.data.length)if(e.data&&1==e.data.length){var n={company_id:e.data[0].company_id,person_no:e.data[0].person_no,name:e.data[0].name};t.setUserProjectList(n)}else t.setProjectCardUserList(e.data),t.$miRouter.replace("/pages_info/userinfo/choice_items");else t.$miRouter.replace("/pages_info/userinfo/bind_items");else uni.hideLoading(),uni.$u.toast(e.msg)})).catch((function(e){uni.$u.toast(e)}))},setUserProjectList:function(e){var t=this;this.$showLoading({title:"加载中....",mask:!0}),(0,a.setUserBindProjectPoint)(e).then((function(n){0==n.code?(uni.$u.toast("成功"),uni.hideLoading(),t.$miRouter.replace({path:"/pages_info/userinfo/perfect_userinfo",query:{company_id:e.company_id,person_no:e.person_no}})):(uni.hideLoading(),uni.$u.toast(n.msg))})).catch((function(e){uni.$u.toast(e)}))}}),onLoad:function(){var e={};this.getAuthCode(e)}};t.default=s},"9c73":function(e,t,n){"use strict";n.r(t);var o=n("1cad"),i=n("f5bc");for(var a in i)"default"!==a&&function(e){n.d(t,e,(function(){return i[e]}))}(a);n("19cc");var r,s=n("f0c5"),u=Object(s["a"])(i["default"],o["b"],o["c"],!1,null,"c456983e",null,!1,o["a"],r);t["default"]=u.exports},cf8e:function(e,t,n){var o=n("24fb");t=o(!1),t.push([e.i,'@charset "UTF-8";\n/* 颜色变量 */uni-page-body[data-v-c456983e]{padding:0}.login[data-v-c456983e]{background-color:#fff;height:100vh;background-size:100% %?785?%;background-repeat:no-repeat}.login .wx-login[data-v-c456983e]{padding-top:%?100?%}.login .wx-login .avatar[data-v-c456983e]{display:inline-block;width:%?200?%;height:%?200?%;border-radius:50%;border:1px solid #eee;overflow:hidden}.login .wx-login .user-name[data-v-c456983e]{margin-top:%?10?%;height:%?60?%;font-size:%?42?%}.login .wx-login .login-btn[data-v-c456983e]{width:100%;padding:%?80?%}.login .wx-login .alipay-login[data-v-c456983e]{background-color:#11e69e;border-color:#11e69e}',""]),e.exports=t},d2bc:function(e,t,n){"use strict";var o=n("4ea4");Object.defineProperty(t,"__esModule",{value:!0}),t.getApiBookingUserAgreementSignList=t.getApiBookingAlipayAgreementUnsign=t.getApiBookingAlipayAgreementSgin=t.getApiWechatCongfigGet=t.getApiUserGetProjectCardUserList=t.uploadStsOssToken=t.uploadOssToken=t.uploadUserFace=t.setUserLogout=t.setApiChangeProjectPoint=t.setUserBindProjectPoint=t.apiBookingUserProjectList=t.apiBookingLoginH5LoginTemp=t.apiBookingLoginH5Login=t.getApiBindProjectCardUserList=t.apiWechatPhoneLogin=t.apiWechatAuth=t.apiSmsSend=t.apiAlipayAuth=t.apiAlipayLoginPhone=t.apiLoginPhone=void 0;var i=o(n("3c62")),a=function(e){return i.default.post("/booking/login/phone",e)};t.apiLoginPhone=a;var r=function(e){return i.default.post("/booking/alipay/phone_login",e)};t.apiAlipayLoginPhone=r;var s=function(e){return i.default.post("/booking/alipay/auth",e)};t.apiAlipayAuth=s;var u=function(e){return i.default.post("/booking/sms/send_validate_code",e)};t.apiSmsSend=u;var c=function(e){return i.default.post("/booking/wechat/miniapp_auth",e)};t.apiWechatAuth=c;var d=function(e){return i.default.post("/booking/wechat/miniapp_phone_login",e)};t.apiWechatPhoneLogin=d;var g=function(e){return i.default.post("/booking/user/get_bind_project_card_user_list",e)};t.getApiBindProjectCardUserList=g;var l=function(e){return i.default.post("/booking/login/h5_login",e)};t.apiBookingLoginH5Login=l;var p=function(e){return i.default.post("/booking/login/h5_login_temp",e)};t.apiBookingLoginH5LoginTemp=p;var f=function(e){return i.default.post("/booking/user/project_list",e)};t.apiBookingUserProjectList=f;var h=function(e){return i.default.post("/booking/user/bind_project_point",e)};t.setUserBindProjectPoint=h;var v=function(e){return i.default.post("/booking/user/change_project_point",e)};t.setApiChangeProjectPoint=v;var _=function(e){return i.default.post("/booking/user/logout",e)};t.setUserLogout=_;var b=function(e){return i.default.post("/booking/user/upload_user_face",e)};t.uploadUserFace=b;var k=function(e){return i.default.post("/booking/upload_file/get_oss_token",e)};t.uploadOssToken=k;var m=function(e){return i.default.post("/booking/upload_file/get_sts_oss_token",e)};t.uploadStsOssToken=m;var L=function(e){return i.default.post("/booking/user/get_project_card_user_list",e)};t.getApiUserGetProjectCardUserList=L;var A=function(e){return i.default.post("/booking/common/wechat_congfig_get",e)};t.getApiWechatCongfigGet=A;var P=function(e){return i.default.post("/booking/alipay/agreement_sgin",e)};t.getApiBookingAlipayAgreementSgin=P;var y=function(e){return i.default.post("/booking/alipay/agreement_unsign",e)};t.getApiBookingAlipayAgreementUnsign=y;var w=function(e){return i.default.post("/booking/card_agent_sign/list",e)};t.getApiBookingUserAgreementSignList=w},f5bc:function(e,t,n){"use strict";n.r(t);var o=n("8122"),i=n.n(o);for(var a in o)"default"!==a&&function(e){n.d(t,e,(function(){return o[e]}))}(a);t["default"]=i.a}}]);