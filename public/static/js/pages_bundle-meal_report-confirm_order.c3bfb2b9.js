(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages_bundle-meal_report-confirm_order"],{"1c7e3":function(e,t,r){"use strict";r.r(t);var a=r("a2f9"),o=r("455c");for(var n in o)"default"!==n&&function(e){r.d(t,e,(function(){return o[e]}))}(n);var i,s=r("f0c5"),d=Object(s["a"])(o["default"],a["b"],a["c"],!1,null,"2b64a2e0",null,!1,a["a"],i);t["default"]=d.exports},"22b9":function(e,t,r){"use strict";var a=r("4ea4");Object.defineProperty(t,"__esModule",{value:!0}),t.reportMealOrderMonthDetail=t.reportMealOrderRefund=t.reportMealOrderDetailInfo=t.reportMealCollectionOrder=t.reportMealMonthOrder=t.reportMealOrderPay=t.reportMealOrderCreate=t.reportMealOrgDelete=t.reportShopcardList=t.reportShopcardClean=t.reportShopcardDelete=t.reportShopcardAdd=t.getReportMealStall=t.reportMealGetMealType=void 0;var o=a(r("3c62")),n=function(e){return o.default.post("/booking/report_meal/get_meal_type",e)};t.reportMealGetMealType=n;var i=function(e){return o.default.post("/booking/report_meal/get_report_meal_stall",e)};t.getReportMealStall=i;var s=function(e){return o.default.post("/booking/shopcard/report_add",e)};t.reportShopcardAdd=s;var d=function(e){return o.default.post("/booking/shopcard/report_delete",e)};t.reportShopcardDelete=d;var l=function(e){return o.default.post("/booking/shopcard/report_clean",e)};t.reportShopcardClean=l;var c=function(e){return o.default.post("/booking/shopcard/report_meal_calc_list",e)};t.reportShopcardList=c;var u=function(e){return o.default.post("/booking/shopcard/report_meal_org_delete",e)};t.reportMealOrgDelete=u;var p=function(e){return o.default.post("/booking/report_meal/report_meal_order_create",e)};t.reportMealOrderCreate=p;var f=function(e){return o.default.post("/booking/report_meal/report_meal_order_pay",e)};t.reportMealOrderPay=f;var m=function(e){return o.default.post("/booking/report_meal/month_report_meal_order",e)};t.reportMealMonthOrder=m;var _=function(e){return o.default.post("/booking/report_meal/collection_report_meal_order",e)};t.reportMealCollectionOrder=_;var h=function(e){return o.default.post("/booking/report_meal/month_report_meal_order_detail_info",e)};t.reportMealOrderDetailInfo=h;var v=function(e){return o.default.post("/booking/report_meal/report_meal_order_refund",e)};t.reportMealOrderRefund=v;var b=function(e){return o.default.post("/booking/report_meal/month_order_meal_detail_info",e)};t.reportMealOrderMonthDetail=b},"287b":function(e,t,r){"use strict";r("a9e3"),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a={data:function(){return{newPrice:0,subscriptSize:""}},components:{},props:{size:{type:[String,Number],default:28},color:{type:String},weight:{type:[String,Number],default:400},price:{type:[String,Number],default:""},showSubscript:{type:Boolean,default:!0},lineThrough:{type:Boolean,default:!1}},created:function(){this.priceFormat()},watch:{price:function(e){this.priceFormat()}},methods:{priceFormat:function(){var e=this.price;null!==e&&""!==e&&void 0!==e&&(e=Number(e)/100,e=e.toFixed(2),this.newPrice=e)}}};t.default=a},"455c":function(e,t,r){"use strict";r.r(t);var a=r("287b"),o=r.n(a);for(var n in a)"default"!==n&&function(e){r.d(t,e,(function(){return a[e]}))}(n);t["default"]=o.a},"641f":function(e,t,r){"use strict";r.r(t);var a=r("67c4"),o=r.n(a);for(var n in a)"default"!==n&&function(e){r.d(t,e,(function(){return a[e]}))}(n);t["default"]=o.a},"67c4":function(e,t,r){"use strict";var a=r("4ea4");r("d81d"),r("a9e3"),r("d3b7"),r("ac1f"),r("5319"),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=a(r("5530")),n=r("22b9"),i=a(r("da0c")),s={data:function(){return{value:1,paramsData:"",shopCardList:[],allFee:"",userId:"",companyId:"",mealTypeList:["breakfast","lunch","afternoon","dinner","supper","morning"],limitCount:0,numberKey:0}},methods:{getShopcardList:function(){var e=this;(0,n.reportShopcardList)({payment_order_type:this.paramsData.payment_order_type,take_meal_type:this.paramsData.take_meal_type}).then((function(t){uni.hideLoading(),0==t.code?(e.shopCardList=[],t.data.shopcard.map((function(t){var r=[];e.mealTypeList.map((function(e){t.stall.map((function(t){t.meal_type===e&&r.push(t)}))})),e.shopCardList.push({date:t.date,stall:r})})),e.numberKey=Math.random(),e.allFee=t.data.all_date_fee):uni.$u.toast(t.msg)})).catch((function(e){uni.$u.toast(e.msg)}))},shopcardParams:function(e,t){var r={payment_order_type:this.paramsData.payment_order_type,take_meal_type:this.paramsData.take_meal_type,date:t,meal_type:e.meal_type,organization_id:e.stall_id,organization_alias:e.stall_name,report_fee:e.report_fee,fuwu_fee:e.fuwu_fee,consume_type:e.consume_type};return r},addShopcard:function(e,t){var r=this;this.$showLoading({mask:!0}),(0,n.reportShopcardAdd)((0,o.default)({limit_count:Number(this.limitCount)},this.shopcardParams(e,t))).then((function(e){uni.hideLoading(),0==e.code||202==e.code?r.getShopcardList():uni.$u.toast(e.msg)})).catch((function(e){uni.$u.toast(e.msg)}))},delShopcard:function(e,t,r){var a=this;this.$showLoading({mask:!0}),(0,n.reportShopcardDelete)((0,o.default)((0,o.default)({},this.shopcardParams(e,t)),{},{clean_org_all:r})).then((function(e){uni.hideLoading(),0==e.code?a.getShopcardList():uni.$u.toast(e.msg)})).catch((function(e){uni.$u.toast(e.msg)}))},handlePlus:function(e,t){this.addShopcard(e,t)},handleMinus:function(e,t){this.delShopcard(e,t,!1)},onSubmitOrder:function(){var e=this;this.loading=!0,(0,n.reportMealOrderCreate)({person_no:this.paramsData.person.person_no,take_meal_type:this.paramsData.take_meal_type,payment_order_type:this.paramsData.payment_order_type,org_id:this.paramsData.org.org_id,company_id:this.companyId,user_id:this.userId}).then((function(t){0==t.code?e.$miRouter.replace({path:"/pages_bundle/payment/payment",query:{data:t.data}}):uni.$u.toast(t.msg)})).catch((function(e){uni.$u.toast(e.data.msg)})).finally((function(t){e.loading=!1}))}},onLoad:function(){this.paramsData=this.$store.state.appoint.select;var e=i.default.get("userInfo");this.companyId=e.company_id,this.userId=e.user_id,this.getShopcardList(),this.limitCount=this.$Route.query.limit_count}};t.default=s},"7cda":function(e,t,r){var a=r("24fb");t=a(!1),t.push([e.i,'@charset "UTF-8";\n/* 颜色变量 */.confirm_order[data-v-91006444]{padding:%?40?%}.confirm_order .title[data-v-91006444]{position:relative;padding-left:%?24?%;padding-bottom:%?20?%}.confirm_order .title[data-v-91006444]::before{content:"";width:%?6?%;height:%?30?%;position:absolute;left:0;top:10%;background-color:#11e69e}.confirm_order .ls-card[data-v-91006444]{border-radius:%?20?%}.confirm_order .section[data-v-91006444]{padding-bottom:calc(%?100?% + env(safe-area-inset-bottom))}.confirm_order .section .order-list[data-v-91006444]{padding:0 %?36?%}.confirm_order .section .order-list .bb[data-v-91006444]{border-bottom:1px solid #efefef}.confirm_order .section .order-list > uni-view[data-v-91006444]{padding:%?30?% 0}.confirm_order .section .order-list .food > uni-view[data-v-91006444]:first-child{margin-top:0}.confirm_order .section .order-list .food .food-name[data-v-91006444]{width:%?260?%}.confirm_order .section .order-list .minus[data-v-91006444],\n.confirm_order .section .order-list .plus[data-v-91006444]{color:#11e69e;width:%?32?%;height:%?32?%;display:flex;justify-content:center;align-items:center;border:1px solid #11e69e;border-radius:%?4?%}.confirm_order .section .order-list .plus[data-v-91006444]{background-color:#11e69e;color:#fff;border-color:#11e69e}.confirm_order .section .order-list .input[data-v-91006444]{width:%?50?%}.confirm_order .footer[data-v-91006444]{width:100%;position:fixed;bottom:0;left:0;padding-left:%?38?%;border-top:1px solid #eaecee;padding-bottom:env(safe-area-inset-bottom)}.confirm_order .footer--warpper[data-v-91006444]{height:%?100?%}.confirm_order .footer .submit-btn[data-v-91006444]{width:%?200?%;height:100%;background-color:#11e69e}',""]),e.exports=t},"9fb4":function(e,t,r){"use strict";var a=r("dce0"),o=r.n(a);o.a},a2f9:function(e,t,r){"use strict";var a;r.d(t,"b",(function(){return o})),r.d(t,"c",(function(){return n})),r.d(t,"a",(function(){return a}));var o=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("v-uni-text",{class:(e.lineThrough?"line-through":"")+" price-format",style:{color:e.color,"font-weight":e.weight,"font-size":e.size+"rpx"}},[e.showSubscript?r("v-uni-text",{style:{"font-size":e.subscriptSize+"rpx","margin-right":"2rpx"}},[e._v("¥")]):e._e(),r("v-uni-text",[e._v(e._s(e.newPrice))])],1)},n=[]},b591:function(e,t,r){"use strict";r.r(t);var a=r("ca6f"),o=r("641f");for(var n in o)"default"!==n&&function(e){r.d(t,e,(function(){return o[e]}))}(n);r("9fb4");var i,s=r("f0c5"),d=Object(s["a"])(o["default"],a["b"],a["c"],!1,null,"91006444",null,!1,a["a"],i);t["default"]=d.exports},ca6f:function(e,t,r){"use strict";r.d(t,"b",(function(){return o})),r.d(t,"c",(function(){return n})),r.d(t,"a",(function(){return a}));var a={priceFormat:r("1c7e3").default,numberBox:r("7837").default},o=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("v-uni-view",{staticClass:"confirm_order"},[r("v-uni-view",{staticClass:"section"},e._l(e.shopCardList,(function(t,a){return r("v-uni-view",{key:a,staticClass:"m-b-30"},[r("v-uni-view",{staticClass:"title lg f-w-500 black"},[e._v(e._s(t.date))]),e._l(t.stall,(function(a,o){return r("v-uni-view",{key:o,staticClass:"order-list ls-card bg-white m-b-15"},[r("v-uni-view",{staticClass:"bb flex row-between f-w-500"},[r("v-uni-text",{staticClass:"black"},[e._v(e._s(a.meal_type_alias))]),r("v-uni-text",{staticClass:"black"},[e._v(e._s(a.stall_name))])],1),r("v-uni-view",{staticClass:"bb"},[r("v-uni-view",{staticClass:"flex row-between"},[r("v-uni-text",{staticClass:"muted"},[e._v(e._s(a.meal_type_alias)+"价格：")]),r("price-format",{attrs:{price:a.total_report_fee,size:30}})],1),r("v-uni-view",{staticClass:"m-t-24 flex row-between"},[r("v-uni-text",{staticClass:"muted"},[e._v("服务费：")]),r("price-format",{attrs:{price:a.fuwu_fee,size:30}})],1)],1),r("v-uni-view",{staticClass:"bb flex row-between"},[r("v-uni-view",{staticClass:"flex flex-center"},[r("v-uni-text",{staticClass:"muted m-r-10"},[e._v("份数：")]),r("number-box",{key:e.numberKey,attrs:{value:a.count},on:{plus:function(r){arguments[0]=r=e.$handleEvent(r),e.handlePlus(a,t.date)},minus:function(r){arguments[0]=r=e.$handleEvent(r),e.handleMinus(a,t.date)}}})],1),r("v-uni-view",[r("v-uni-text",{staticClass:"muted m-r-20"},[e._v("合计")]),r("price-format",{attrs:{price:a.one_stall_fee,size:30}})],1)],1)],1)}))],2)})),1),r("v-uni-view",{staticClass:"footer bg-white"},[r("v-uni-view",{staticClass:"footer--warpper flex row-between"},[r("v-uni-view",{staticClass:"muted flex col-center"},[r("v-uni-text",{staticClass:"m-r-20 md"},[e._v("合计")]),r("price-format",{attrs:{price:e.allFee,size:40,color:"#000000"}})],1),r("v-uni-view",{staticClass:"submit-btn white flex flex-center",on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.onSubmitOrder.apply(void 0,arguments)}}},[e._v("提交订单")])],1)],1)],1)},n=[]},dce0:function(e,t,r){var a=r("7cda");"string"===typeof a&&(a=[[e.i,a,""]]),a.locals&&(e.exports=a.locals);var o=r("4f06").default;o("7984788a",a,!0,{sourceMap:!1,shadowMode:!1})}}]);