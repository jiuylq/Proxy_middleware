(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages_health-healthy-body_management-upload_report"],{"36cd":function(e,t,a){"use strict";var r=a("4ea4");Object.defineProperty(t,"__esModule",{value:!0}),t.getApicardEnable=t.queryOrderInfo=t.getThirdSetting=t.thirdLogin=t.createApiThirdRecharge=t.getApiCardUnbind=t.getApiCardLoss=t.getApiCancelLogoutRecord=t.getApiAddLogoutRecord=t.getApiLogoutRecord=t.apiGetUserInfoList=t.getApiUserSwitchFacepay=t.getApiUploadUserFace=t.getApiUploadFileGetOssToken=t.getApiUserWalletList=t.apiReservationGetOrderPay=t.apiGetPayMethodList=t.getApiGenerateEaccountCode=t.apiGetCanteenList=t.apiReservationOrderCreate=t.apiProjectList=t.apiMonthReservationOrderDetailInfo=t.apiMonthReservationOrder=t.apiGetWechatUserInfo=t.apiGetReservationStallFood=t.apiGenerateEaccountCode=t.apiCreateCardInfo=t.apiCollectionReservationOrder=t.apiCardUserOrWechatUserInfoSave=t.apiBindProjectPoint=t.apiQueryUserinfo=t.getApiRechargeOrderQuery=t.getApiRechargeOrderCreate=t.getApiRechargeGetSettings=t.getApiRechargeWalletList=void 0;var n=r(a("3c62")),o=function(e){return n.default.post("/booking/recharge/wallet_list",e)};t.getApiRechargeWalletList=o;var i=function(e){return n.default.post("/booking/recharge/get_settings",e)};t.getApiRechargeGetSettings=i;var u=function(e){return n.default.post("/booking/recharge/order_create",e)};t.getApiRechargeOrderCreate=u;var s=function(e){return n.default.post("/booking/recharge/order_query",e)};t.getApiRechargeOrderQuery=s;var d=function(e){return n.default.post("/booking/login/query_userinfo",e)};t.apiQueryUserinfo=d;var c=function(e){return n.default.post("/booking/user/bind_project_point",e)};t.apiBindProjectPoint=c;var l=function(e){return n.default.post("/booking/user/card_user_or_wechat_user_info_save",e)};t.apiCardUserOrWechatUserInfoSave=l;var f=function(e){return n.default.post("/booking/reservation/collection_reservation_order",e)};t.apiCollectionReservationOrder=f;var p=function(e){return n.default.post("/booking/user/create_card_info",e)};t.apiCreateCardInfo=p;var g=function(e){return n.default.post("/booking/user/generate_eaccount_code",e)};t.apiGenerateEaccountCode=g;var h=function(e){return n.default.post("/booking/reservation/get_reservation_stall_food",e)};t.apiGetReservationStallFood=h;var v=function(e){return n.default.post("/booking/user/get_wechat_user_info",e)};t.apiGetWechatUserInfo=v;var b=function(e){return n.default.post("/booking/reservation/month_reservation_order",e)};t.apiMonthReservationOrder=b;var _=function(e){return n.default.post("/booking/reservation/month_reservation_order_detail_info",e)};t.apiMonthReservationOrderDetailInfo=_;var w=function(e){return n.default.post("/booking/user/project_list",e)};t.apiProjectList=w;var m=function(e){return n.default.post("/booking/reservation/reservation_order_create",e)};t.apiReservationOrderCreate=m;var k=function(e){return n.default.post("/booking/user/get_canteen_list",e)};t.apiGetCanteenList=k;var y=function(e){return n.default.post("/booking/user/generate_eaccount_code",e)};t.getApiGenerateEaccountCode=y;var R=function(e){return n.default.post("/booking/user/get_pay_method_list",e)};t.apiGetPayMethodList=R;var L=function(e){return n.default.post("/booking/reservation/reservation_order_pay",e)};t.apiReservationGetOrderPay=L;var A=function(e){return n.default.post("/booking/user/get_user_wallet_list",e)};t.getApiUserWalletList=A;var U=function(e){return n.default.post("/booking/upload_file/get_oss_token",e)};t.getApiUploadFileGetOssToken=U;var I=function(e){return n.default.post("/booking/user/upload_user_face",e)};t.getApiUploadUserFace=I;var C=function(e){return n.default.post("/booking/user/switch_facepay",e)};t.getApiUserSwitchFacepay=C;var O=function(e){return n.default.post("/booking/user/get_user_info_list",e)};t.apiGetUserInfoList=O;var P=function(e){return n.default.post("/booking/user/logout_record",e)};t.getApiLogoutRecord=P;var F=function(e){return n.default.post("/booking/user/add_logout_record",e)};t.getApiAddLogoutRecord=F;var x=function(e){return n.default.post("/booking/user/cancel_logout_record",e)};t.getApiCancelLogoutRecord=x;var G=function(e){return n.default.post("/booking/user/card_loss",e)};t.getApiCardLoss=G;var M=function(e){return n.default.post("/booking/user/card_unbind",e)};t.getApiCardUnbind=M;var S=function(e){return n.default.post("/booking/user_order/order_create",e)};t.createApiThirdRecharge=S;var E=function(e){return n.default.post("/booking/user_order/h5_login_verify",e)};t.thirdLogin=E;var j=function(e){return n.default.post("/booking/user_order/get_settings",e)};t.getThirdSetting=j;var T=function(e){return n.default.post("/booking/user_order/get_order_info",e)};t.queryOrderInfo=T;var B=function(e){return n.default.post("/booking/user/card_enable",e)};t.getApicardEnable=B},"51e4":function(e,t,a){var r=a("92e3");"string"===typeof r&&(r=[[e.i,r,""]]),r.locals&&(e.exports=r.locals);var n=a("4f06").default;n("39bda2ec",r,!0,{sourceMap:!1,shadowMode:!1})},"55ed":function(e,t,a){"use strict";a.d(t,"b",(function(){return n})),a.d(t,"c",(function(){return o})),a.d(t,"a",(function(){return r}));var r={uUpload:a("45f6").default,uButton:a("15e4").default},n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-uni-view",{staticClass:"upload-report"},[a("v-uni-view",{staticStyle:{padding:"40rpx 40rpx 80rpx 10rpx"}},[a("u-upload",{attrs:{fileList:e.fileList1,previewFullImage:!0,name:"1",multiple:!0,maxCount:15},on:{afterRead:function(t){arguments[0]=t=e.$handleEvent(t),e.afterRead.apply(void 0,arguments)},delete:function(t){arguments[0]=t=e.$handleEvent(t),e.deletePic.apply(void 0,arguments)}}})],1),a("v-uni-view",{staticClass:"upload-btn"},[a("u-button",{attrs:{text:"上传识别",color:"linear-gradient(90deg,  #11E69E 0%, #11E6C5 100%)"},on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.clickUpload.apply(void 0,arguments)}}})],1)],1)},o=[]},"5d4c":function(e,t,a){"use strict";a.r(t);var r=a("fd44"),n=a.n(r);for(var o in r)"default"!==o&&function(e){a.d(t,e,(function(){return r[e]}))}(o);t["default"]=n.a},"6d80":function(e,t,a){"use strict";var r=a("51e4"),n=a.n(r);n.a},"92e3":function(e,t,a){var r=a("24fb");t=r(!1),t.push([e.i,'@charset "UTF-8";\n/* 颜色变量 */.upload-report[data-v-c1d851c2]{height:100vh;background-color:#fff\n  /* padding: 32rpx 40rpx 0; */}.upload-report .upload-btn[data-v-c1d851c2]{width:100%;position:fixed;bottom:0}',""]),e.exports=t},b7c0:function(e,t,a){"use strict";a.r(t);var r=a("55ed"),n=a("5d4c");for(var o in n)"default"!==o&&function(e){a.d(t,e,(function(){return n[e]}))}(o);a("6d80");var i,u=a("f0c5"),s=Object(u["a"])(n["default"],r["b"],r["c"],!1,null,"c1d851c2",null,!1,r["a"],i);t["default"]=s.exports},f6b4:function(e,t,a){"use strict";function r(e,t){return new Promise((function(t){var a="",r=new Image,n=document.createElement("canvas"),o=n.getContext("2d");r.src=e,r.onload=function(){var e=r.width,i=r.height,u=r.width/2,s=r.height/2;if((e>u||i>s)&&(e/i>u/s?(r.width=u,r.height=Math.round(u*(i/e))):(r.height=s,r.width=Math.round(s*(e/i)))),n.width=r.width,n.height=r.height,o.clearRect(0,0,n.width,n.height),a)switch(Number(a)){case 2:o.translate(r.width,0),o.scale(-1,1),o.drawImage(r,0,0,r.width,r.height);break;case 3:o.rotate(180*Math.PI/180),o.drawImage(r,-r.width,-r.height,r.width,r.height);break;case 4:o.translate(r.width,0),o.scale(-1,1),o.rotate(180*Math.PI/180),o.drawImage(r,-r.width,-r.height,r.width,r.height);break;case 5:o.translate(r.width,0),o.scale(-1,1),o.rotate(90*Math.PI/180),o.drawImage(r,0,-r.width,r.height,r.width);break;case 6:n.width=r.height,n.height=r.width,o.rotate(90*Math.PI/180),o.drawImage(r,0,0,r.width,-r.height);break;case 7:o.translate(r.width,0),o.scale(-1,1),o.rotate(270*Math.PI/180),o.drawImage(r,-r.height,0,r.height,r.width);break;case 8:o.rotate(270*Math.PI/180),o.drawImage(r,-r.height,0,r.height,r.width);break;default:o.drawImage(r,0,0,r.width,r.height);break}else o.drawImage(r,0,0,r.width,r.height);var d=n.toDataURL("image/jpeg",.7);t(d)}}))}function n(e){for(var t=window.atob(e.split(",")[1]),a=new ArrayBuffer(t.length),r=new Uint8Array(a),n=0;n<t.length;n++)r[n]=t.charCodeAt(n);return new Blob([a],{type:"image/jpg"})}function o(e,t){var a=e.split(","),r=a[0].match(/:(.*?);/)[1],n=atob(a[1]),o=n.length,i=new Uint8Array(o);while(o--)i[o]=n.charCodeAt(o);return new File([i],t,{type:r})}function i(e){return new Promise((function(t,a){if("object"===typeof window&&"document"in window){if("function"===typeof FileReader){var r=new XMLHttpRequest;return r.open("GET",e,!0),r.responseType="blob",r.onload=function(){if(200===this.status){var e=new FileReader;e.onload=function(e){t(e.target.result)},e.onerror=a,e.readAsDataURL(this.response)}},r.onerror=a,void r.send()}var n=document.createElement("canvas"),o=n.getContext("2d"),i=new Image;return i.onload=function(){n.width=i.width,n.height=i.height,o.drawImage(i,0,0),t(n.toDataURL()),n.height=n.width=0},i.onerror=a,void(i.src=e)}"object"!==typeof plus?"object"===typeof wx&&wx.canIUse("getFileSystemManager")?wx.getFileSystemManager().readFile({filePath:e,encoding:"base64",success:function(e){t("data:image/png;base64,"+e.data)},fail:function(e){a(e)}}):a(new Error("not support")):plus.io.resolveLocalFileSystemURL(getLocalFilePath(e),(function(e){e.file((function(e){var r=new plus.io.FileReader;r.onload=function(e){t(e.target.result)},r.onerror=function(e){a(e)},r.readAsDataURL(e)}),(function(e){a(e)}))}),(function(e){a(e)}))}))}a("c19f"),a("ace4"),a("a9e3"),a("d3b7"),a("ac1f"),a("466d"),a("1276"),a("5cc6"),a("9a8c"),a("a975"),a("735e"),a("c1ac"),a("d139"),a("3a7b"),a("d5d6"),a("82f8"),a("e91f"),a("60bd"),a("5f96"),a("3280"),a("3fcc"),a("ca91"),a("25a1"),a("cd26"),a("2954"),a("649e"),a("219c"),a("b39a"),a("72f7"),Object.defineProperty(t,"__esModule",{value:!0}),t.compressImage=r,t.convertBase64UrlToBlob=n,t.dataURLtoFile=o,t.pathToBase64=i},fd44:function(e,t,a){"use strict";var r=a("4ea4");a("99af"),a("d81d"),a("a434"),a("d3b7"),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=r(a("5530"));a("96cf");var o=r(a("1da1")),i=(a("f6b4"),a("36cd")),u={data:function(){return{fileList1:[],fileList:[]}},onLoad:function(e){this.getUploadFileGetOssToken()},onShow:function(){},mounted:function(){},methods:{afterRead:function(e,t){var a=this;return(0,o.default)(regeneratorRuntime.mark((function t(){var r,o,i,u,s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:r=[].concat(e.file),o=a["fileList".concat(e.name)].length,r.map((function(t){a["fileList".concat(e.name)].push((0,n.default)((0,n.default)({},t),{},{status:"uploading",message:"上传中"}))})),i=0;case 4:if(!(i<r.length)){t.next=14;break}return t.next=7,a.uploadFilePromise(r[i].url);case 7:u=t.sent,s=a["fileList".concat(e.name)][o],a["fileList".concat(e.name)].splice(o,1,Object.assign(s,{status:"success",message:"",url:u})),o++;case 11:i++,t.next=4;break;case 14:case"end":return t.stop()}}),t)})))()},uploadFilePromise:function(e){var t=this,a=this;return a.loadingBtn=!0,new Promise((function(r,n){uni.uploadFile({url:t.actionUrl,filePath:e,name:"file",formData:t.uploadParams,success:function(e){a.getUploadFileGetOssToken(),r(JSON.parse(e.data).data.public_url)}})}))},getUploadFileGetOssToken:function(){var e=this;(0,i.getApiUploadFileGetOssToken)().then((function(t){0==t.code?(e.actionUrl=t.data.host,e.uploadParams={key:t.data.prefix+(new Date).getTime()+Math.floor(150*Math.random())+".png",prefix:t.data.prefix,policy:t.data.policy,OSSAccessKeyId:t.data.accessid,signature:t.data.signature,callback:t.data.callback,success_action_status:"200"},e.loadingBtn=!1):uni.$u.toast(t.msg)})).catch((function(e){uni.$u.toast(e)}))},deletePic:function(e){this["fileList".concat(e.name)].splice(e.index,1)},clickUpload:function(){if(!this.fileList1.length)return uni.$u.toast("请先上传图片");var e=this.fileList1.map((function(e){return e.url}));this.$miRouter.push({path:"/pages_health/healthy/body_management/information_filling",query:{type:"add",urlList:this.$encodeQuery(e)}})}}};t.default=u}}]);