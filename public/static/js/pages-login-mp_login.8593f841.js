(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-login-mp_login"],{"08d1":function(e,t,o){"use strict";var n=o("4ea4");o("d3b7"),o("ac1f"),o("5319"),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=n(o("5530")),a=o("d2bc"),r=o("26cb"),s=(n(o("da0c")),{data:function(){return{hasAuthCode:!1,authInfo:{},canIUseAuthButton:!1,checkedAgreement:[],showAgreementTips:!1,showPopupAgreementTips:!1,customStyleTo:{backgroundColor:"#52da98",color:"#fff",width:"55%",height:"65rpx"},customStyleBack:{width:"30%",height:"65rpx",color:"#52da98",border:"1px solid #52da98"}}},methods:(0,i.default)((0,i.default)({},(0,r.mapMutations)(["SETCOOKIE","USERINFO","setProjectCardUserList"])),{},{getAuthCode:function(){this.$showLoading({title:"加载中...",mask:!0});var e={};uni.getProvider({service:"oauth",success:function(t){uni.login((0,i.default)((0,i.default)({},e),{},{provider:t.provider[0],success:function(e){var t=e.code;console.log("一键登录code",t)},fail:function(e){uni.hideLoading()}}))}})},getPhoneNumber:function(e){console.log("获取一键登陆的code",e),this.wechatPLogin(e.detail.code)},wechatPLogin:function(e){var t=this;(0,a.apiWechatPhoneLogin)({code:e}).then((function(e){t.loginHandle(e)})).finally((function(e){}))},loginHandle:function(e){var t=e.data;this.USERINFO(t),this.$miRouter.replace({path:"/pages_info/userinfo/bind_items"})},getAuthorizeHandle:function(){var e=this;my.getPhoneNumber({success:function(t){e.$showLoading({title:"加载中....",mask:!0});var o=JSON.parse(t.response).response;(0,a.apiAlipayLoginPhone)({encrypted_data:o}).then((function(t){if(uni.hideLoading(),0===t.code){var o=t.data;e.USERINFO(o),e.checkInfo(t)}else uni.$u.toast(t.msg)})).catch((function(e){uni.hideLoading(),console.log(e)}))},fail:function(e){console.log("getPhoneNumber_fail",e)}})},checkInfo:function(e){if(e.data.person_no)this.$miRouter.replaceAll({path:"/pages/index/index"});else{var t={company_id:e.data.company_id,user_id:e.data.user_id};this.getBindProjectCardUserList(t)}},getBindProjectCardUserList:function(e){var t=this;this.$showLoading({title:"获取项目点....",mask:!0}),(0,a.getApiBindProjectCardUserList)(e).then((function(e){if(0==e.code)if(uni.hideLoading(),e.data.length)if(e.data&&1==e.data.length){var o={company_id:e.data[0].company_id,person_no:e.data[0].person_no,name:e.data[0].name};t.setUserProjectList(o)}else t.setProjectCardUserList(e.data),t.$miRouter.replace("/pages_info/userinfo/choice_items");else t.$miRouter.replace("/pages_info/userinfo/bind_items");else uni.hideLoading(),uni.$u.toast(e.msg)})).catch((function(e){uni.$u.toast(e)}))},setUserProjectList:function(e){var t=this;this.$showLoading({title:"加载中....",mask:!0}),(0,a.setUserBindProjectPoint)(e).then((function(o){0==o.code?(uni.$u.toast("成功"),uni.hideLoading(),t.$miRouter.replace({path:"/pages_info/userinfo/perfect_userinfo",query:{company_id:e.company_id,person_no:e.person_no}})):(uni.hideLoading(),uni.$u.toast(o.msg))})).catch((function(e){uni.$u.toast(e)}))},onAuthError:function(e){console.log("getAuthorize_fail",e)},clickConfirmButton:function(){this.checkedAgreement=["true"],this.showAgreementTips=!1},pathAgreement:function(e){this.$miRouter.push("/pages_info/agreement/".concat(e))},clickPopupConfirmButton:function(){this.checkedAgreement=["true"],this.showPopupAgreementTips=!1}}),onLoad:function(){this.getAuthCode()}});t.default=s},"2e86":function(e,t,o){var n=o("5761");"string"===typeof n&&(n=[[e.i,n,""]]),n.locals&&(e.exports=n.locals);var i=o("4f06").default;i("66e07bd7",n,!0,{sourceMap:!1,shadowMode:!1})},5761:function(e,t,o){var n=o("24fb");t=n(!1),t.push([e.i,'@charset "UTF-8";\n/* 颜色变量 */uni-page-body[data-v-459b595a]{padding:0}.login[data-v-459b595a]{background-color:#fff;height:100vh;background-size:100% %?785?%;background-repeat:no-repeat}.login .wx-login[data-v-459b595a]{padding-top:%?100?%}.login .wx-login .avatar[data-v-459b595a]{display:inline-block;width:%?200?%;height:%?200?%;border-radius:50%;border:1px solid #eee;overflow:hidden}.login .wx-login .user-name[data-v-459b595a]{margin-top:%?10?%;height:%?60?%;font-size:%?42?%}.login .wx-login .login-btn[data-v-459b595a]{width:100%;padding:%?80?%}.login .wx-login .alipay-login[data-v-459b595a]{height:%?80?%;line-height:%?80?%;border-radius:%?200?%;font-size:%?28?%;background-color:#11e69e;border-color:#11e69e}.login .wx-login .alipay-login[data-v-459b595a]:active{color:#fff;opacity:.7}',""]),e.exports=t},"6d00":function(e,t,o){"use strict";o.r(t);var n=o("e326"),i=o("a20a");for(var a in i)"default"!==a&&function(e){o.d(t,e,(function(){return i[e]}))}(a);o("7a51");var r,s=o("f0c5"),u=Object(s["a"])(i["default"],n["b"],n["c"],!1,null,"459b595a",null,!1,n["a"],r);t["default"]=u.exports},"7a51":function(e,t,o){"use strict";var n=o("2e86"),i=o.n(n);i.a},a20a:function(e,t,o){"use strict";o.r(t);var n=o("08d1"),i=o.n(n);for(var a in n)"default"!==a&&function(e){o.d(t,e,(function(){return n[e]}))}(a);t["default"]=i.a},d2bc:function(e,t,o){"use strict";var n=o("4ea4");Object.defineProperty(t,"__esModule",{value:!0}),t.getApiBookingUserAgreementSignList=t.getApiBookingAlipayAgreementUnsign=t.getApiBookingAlipayAgreementSgin=t.getApiWechatCongfigGet=t.getApiUserGetProjectCardUserList=t.uploadStsOssToken=t.uploadOssToken=t.uploadUserFace=t.setUserLogout=t.setApiChangeProjectPoint=t.setUserBindProjectPoint=t.apiBookingUserProjectList=t.apiBookingLoginH5LoginTemp=t.apiBookingLoginH5Login=t.getApiBindProjectCardUserList=t.apiWechatPhoneLogin=t.apiWechatAuth=t.apiSmsSend=t.apiAlipayAuth=t.apiAlipayLoginPhone=t.apiLoginPhone=void 0;var i=n(o("3c62")),a=function(e){return i.default.post("/booking/login/phone",e)};t.apiLoginPhone=a;var r=function(e){return i.default.post("/booking/alipay/phone_login",e)};t.apiAlipayLoginPhone=r;var s=function(e){return i.default.post("/booking/alipay/auth",e)};t.apiAlipayAuth=s;var u=function(e){return i.default.post("/booking/sms/send_validate_code",e)};t.apiSmsSend=u;var c=function(e){return i.default.post("/booking/wechat/miniapp_auth",e)};t.apiWechatAuth=c;var d=function(e){return i.default.post("/booking/wechat/miniapp_phone_login",e)};t.apiWechatPhoneLogin=d;var g=function(e){return i.default.post("/booking/user/get_bind_project_card_user_list",e)};t.getApiBindProjectCardUserList=g;var l=function(e){return i.default.post("/booking/login/h5_login",e)};t.apiBookingLoginH5Login=l;var p=function(e){return i.default.post("/booking/login/h5_login_temp",e)};t.apiBookingLoginH5LoginTemp=p;var f=function(e){return i.default.post("/booking/user/project_list",e)};t.apiBookingUserProjectList=f;var h=function(e){return i.default.post("/booking/user/bind_project_point",e)};t.setUserBindProjectPoint=h;var v=function(e){return i.default.post("/booking/user/change_project_point",e)};t.setApiChangeProjectPoint=v;var _=function(e){return i.default.post("/booking/user/logout",e)};t.setUserLogout=_;var m=function(e){return i.default.post("/booking/user/upload_user_face",e)};t.uploadUserFace=m;var b=function(e){return i.default.post("/booking/upload_file/get_oss_token",e)};t.uploadOssToken=b;var k=function(e){return i.default.post("/booking/upload_file/get_sts_oss_token",e)};t.uploadStsOssToken=k;var A=function(e){return i.default.post("/booking/user/get_project_card_user_list",e)};t.getApiUserGetProjectCardUserList=A;var L=function(e){return i.default.post("/booking/common/wechat_congfig_get",e)};t.getApiWechatCongfigGet=L;var P=function(e){return i.default.post("/booking/alipay/agreement_sgin",e)};t.getApiBookingAlipayAgreementSgin=P;var w=function(e){return i.default.post("/booking/alipay/agreement_unsign",e)};t.getApiBookingAlipayAgreementUnsign=w;var y=function(e){return i.default.post("/booking/card_agent_sign/list",e)};t.getApiBookingUserAgreementSignList=y},e326:function(e,t,o){"use strict";var n;o.d(t,"b",(function(){return i})),o.d(t,"c",(function(){return a})),o.d(t,"a",(function(){return n}));var i=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("v-uni-view",{staticClass:"login flex flex-col"},[o("v-uni-view",{staticClass:"wx-login flex flex-col col-center"})],1)},a=[]}}]);