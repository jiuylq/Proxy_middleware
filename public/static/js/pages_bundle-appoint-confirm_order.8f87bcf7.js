(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages_bundle-appoint-confirm_order"],{"09ef":function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r={name:"address-card",data:function(){return{}},methods:{},created:function(){}};t.default=r},1396:function(e,t,a){var r=a("692e");"string"===typeof r&&(r=[[e.i,r,""]]),r.locals&&(e.exports=r.locals);var o=a("4f06").default;o("b0e2cf72",r,!0,{sourceMap:!1,shadowMode:!1})},"1c7e3":function(e,t,a){"use strict";a.r(t);var r=a("a2f9"),o=a("455c");for(var n in o)"default"!==n&&function(e){a.d(t,e,(function(){return o[e]}))}(n);var i,s=a("f0c5"),c=Object(s["a"])(o["default"],r["b"],r["c"],!1,null,"2b64a2e0",null,!1,r["a"],i);t["default"]=c.exports},"287b":function(e,t,a){"use strict";a("a9e3"),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r={data:function(){return{newPrice:0,subscriptSize:""}},components:{},props:{size:{type:[String,Number],default:28},color:{type:String},weight:{type:[String,Number],default:400},price:{type:[String,Number],default:""},showSubscript:{type:Boolean,default:!0},lineThrough:{type:Boolean,default:!1}},created:function(){this.priceFormat()},watch:{price:function(e){this.priceFormat()}},methods:{priceFormat:function(){var e=this.price;null!==e&&""!==e&&void 0!==e&&(e=Number(e)/100,e=e.toFixed(2),this.newPrice=e)}}};t.default=r},"36cd":function(e,t,a){"use strict";var r=a("4ea4");Object.defineProperty(t,"__esModule",{value:!0}),t.getApicardEnable=t.queryOrderInfo=t.getThirdSetting=t.thirdLogin=t.createApiThirdRecharge=t.getApiCardUnbind=t.getApiCardLoss=t.getApiCancelLogoutRecord=t.getApiAddLogoutRecord=t.getApiLogoutRecord=t.apiGetUserInfoList=t.getApiUserSwitchFacepay=t.getApiUploadUserFace=t.getApiUploadFileGetOssToken=t.getApiUserWalletList=t.apiReservationGetOrderPay=t.apiGetPayMethodList=t.getApiGenerateEaccountCode=t.apiGetCanteenList=t.apiReservationOrderCreate=t.apiProjectList=t.apiMonthReservationOrderDetailInfo=t.apiMonthReservationOrder=t.apiGetWechatUserInfo=t.apiGetReservationStallFood=t.apiGenerateEaccountCode=t.apiCreateCardInfo=t.apiCollectionReservationOrder=t.apiCardUserOrWechatUserInfoSave=t.apiBindProjectPoint=t.apiQueryUserinfo=t.getApiRechargeOrderQuery=t.getApiRechargeOrderCreate=t.getApiRechargeGetSettings=t.getApiRechargeWalletList=void 0;var o=r(a("3c62")),n=function(e){return o.default.post("/booking/recharge/wallet_list",e)};t.getApiRechargeWalletList=n;var i=function(e){return o.default.post("/booking/recharge/get_settings",e)};t.getApiRechargeGetSettings=i;var s=function(e){return o.default.post("/booking/recharge/order_create",e)};t.getApiRechargeOrderCreate=s;var c=function(e){return o.default.post("/booking/recharge/order_query",e)};t.getApiRechargeOrderQuery=c;var d=function(e){return o.default.post("/booking/login/query_userinfo",e)};t.apiQueryUserinfo=d;var u=function(e){return o.default.post("/booking/user/bind_project_point",e)};t.apiBindProjectPoint=u;var l=function(e){return o.default.post("/booking/user/card_user_or_wechat_user_info_save",e)};t.apiCardUserOrWechatUserInfoSave=l;var p=function(e){return o.default.post("/booking/reservation/collection_reservation_order",e)};t.apiCollectionReservationOrder=p;var f=function(e){return o.default.post("/booking/user/create_card_info",e)};t.apiCreateCardInfo=f;var _=function(e){return o.default.post("/booking/user/generate_eaccount_code",e)};t.apiGenerateEaccountCode=_;var v=function(e){return o.default.post("/booking/reservation/get_reservation_stall_food",e)};t.apiGetReservationStallFood=v;var g=function(e){return o.default.post("/booking/user/get_wechat_user_info",e)};t.apiGetWechatUserInfo=g;var m=function(e){return o.default.post("/booking/reservation/month_reservation_order",e)};t.apiMonthReservationOrder=m;var b=function(e){return o.default.post("/booking/reservation/month_reservation_order_detail_info",e)};t.apiMonthReservationOrderDetailInfo=b;var h=function(e){return o.default.post("/booking/user/project_list",e)};t.apiProjectList=h;var y=function(e){return o.default.post("/booking/reservation/reservation_order_create",e)};t.apiReservationOrderCreate=y;var w=function(e){return o.default.post("/booking/user/get_canteen_list",e)};t.apiGetCanteenList=w;var k=function(e){return o.default.post("/booking/user/generate_eaccount_code",e)};t.getApiGenerateEaccountCode=k;var C=function(e){return o.default.post("/booking/user/get_pay_method_list",e)};t.apiGetPayMethodList=C;var x=function(e){return o.default.post("/booking/reservation/reservation_order_pay",e)};t.apiReservationGetOrderPay=x;var S=function(e){return o.default.post("/booking/user/get_user_wallet_list",e)};t.getApiUserWalletList=S;var A=function(e){return o.default.post("/booking/upload_file/get_oss_token",e)};t.getApiUploadFileGetOssToken=A;var L=function(e){return o.default.post("/booking/user/upload_user_face",e)};t.getApiUploadUserFace=L;var R=function(e){return o.default.post("/booking/user/switch_facepay",e)};t.getApiUserSwitchFacepay=R;var O=function(e){return o.default.post("/booking/user/get_user_info_list",e)};t.apiGetUserInfoList=O;var I=function(e){return o.default.post("/booking/user/logout_record",e)};t.getApiLogoutRecord=I;var U=function(e){return o.default.post("/booking/user/add_logout_record",e)};t.getApiAddLogoutRecord=U;var $=function(e){return o.default.post("/booking/user/cancel_logout_record",e)};t.getApiCancelLogoutRecord=$;var z=function(e){return o.default.post("/booking/user/card_loss",e)};t.getApiCardLoss=z;var G=function(e){return o.default.post("/booking/user/card_unbind",e)};t.getApiCardUnbind=G;var P=function(e){return o.default.post("/booking/user_order/order_create",e)};t.createApiThirdRecharge=P;var j=function(e){return o.default.post("/booking/user_order/h5_login_verify",e)};t.thirdLogin=j;var F=function(e){return o.default.post("/booking/user_order/get_settings",e)};t.getThirdSetting=F;var M=function(e){return o.default.post("/booking/user_order/get_order_info",e)};t.queryOrderInfo=M;var E=function(e){return o.default.post("/booking/user/card_enable",e)};t.getApicardEnable=E},"3ced":function(e,t,a){"use strict";a.r(t);var r=a("4bf0"),o=a.n(r);for(var n in r)"default"!==n&&function(e){a.d(t,e,(function(){return r[e]}))}(n);t["default"]=o.a},"455c":function(e,t,a){"use strict";a.r(t);var r=a("287b"),o=a.n(r);for(var n in r)"default"!==n&&function(e){a.d(t,e,(function(){return r[e]}))}(n);t["default"]=o.a},"47e3":function(e,t,a){var r=a("fabe");"string"===typeof r&&(r=[[e.i,r,""]]),r.locals&&(e.exports=r.locals);var o=a("4f06").default;o("b8c34d66",r,!0,{sourceMap:!1,shadowMode:!1})},"4bf0":function(e,t,a){"use strict";var r=a("4ea4");a("c975"),a("d81d"),a("a9e3"),a("d3b7"),a("ac1f"),a("5319"),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,a("96cf");var o=r(a("1da1")),n=a("73f1"),i=a("36cd"),s=r(a("da0c")),c={data:function(){return{loading:!1,params:{},totalAmount:0,cartLists:[],cupboardName:"",cupboardId:"",stallIdList:[]}},methods:{onSubmitOrder:function(){var e=this;this.loading=!0;var t={person_no:this.params.person_no,take_meal_type:this.params.take_meal_type,payment_order_type:this.params.payment_order_type,org_id:this.params.org_id,company_id:this.params.company_id,user_id:this.params.user_id};"cupboard"===this.params.take_meal_type&&(t.cupboard_id=Number(this.cupboardId)),(0,i.apiReservationOrderCreate)(t).then((function(t){0===t.code?e.$miRouter.replace({path:"/pages_bundle/payment/payment",query:{data:t.data,takeMealType:e.params.take_meal_type}}):uni.$u.toast(t.msg)})).catch((function(e){uni.$u.toast(e.data.msg)})).finally((function(t){e.loading=!1}))},getShopcardCalcList:function(){var e=this;(0,n.apiShopcardCalcList)({payment_order_type:this.params.payment_order_type,take_meal_type:this.params.take_meal_type,company_id:this.params.company_id}).then((function(t){e.cartLists=t.data.shopcard,e.totalAmount=t.data.all_date_fee,e.stallIdList=[],e.cartLists.map((function(t){t.stall.map((function(t){-1===e.stallIdList.indexOf(t.stall_id)&&e.stallIdList.push(t.stall_id)}))}))})).catch((function(e){uni.$u.toast(e.msg)}))},stallCountChange:function(e,t){var a=this;return(0,o.default)(regeneratorRuntime.mark((function r(){var o,i,s,c,d;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:if(o=t.date,i=t.organization_id,s=t.meal_type,c=t.count,d={take_meal_type:a.params.take_meal_type,payment_order_type:a.params.payment_order_type,date:o,organization_id:i,meal_type:s,company_id:a.params.company_id},!(e>c)){r.next=7;break}return r.next=5,(0,n.apiShopcardAddCount)(d).catch((function(e){uni.$u.toast(e.data.msg)}));case 5:r.next=9;break;case 7:return r.next=9,(0,n.apiShopcardReduceCount)(d).catch((function(e){uni.$u.toast(e.data.msg)}));case 9:a.getShopcardCalcList();case 10:case"end":return r.stop()}}),r)})))()},cartCountChange:function(e,t,a){var r=this;return(0,o.default)(regeneratorRuntime.mark((function o(){var i;return regeneratorRuntime.wrap((function(o){while(1)switch(o.prev=o.next){case 0:if(i={payment_order_type:r.params.payment_order_type,food_id:t.food_id,date:a.date,take_meal_type:r.params.take_meal_type,meal_type:a.meal_type,organization_id:t.organization_id,organization_alias:t.organization_alias,consume_type:t.consume_type,fuwu_fee:t.fuwu_fee,company_id:r.params.company_id,menu_food_id:t.menu_info.menu_food_id,menu_food_object:t.menu_info.menu_food_object,spec_id:t.spec_id,taste_id:t.taste_id},!(e>t.count)){o.next=6;break}return o.next=4,(0,n.apiShopcardAdd)(i).catch((function(e){uni.$u.toast(e.data.msg)}));case 4:o.next=8;break;case 6:return o.next=8,(0,n.apiShopcardDelete)(i).catch((function(e){uni.$u.toast(e.data.msg)}));case 8:r.getShopcardCalcList();case 9:case"end":return o.stop()}}),o)})))()},getInitParams:function(){var e=s.default.get("userInfo"),t=this.$store.state.appoint;this.params.company_id=e.company_id,this.params.take_meal_type=t.select.take_meal_type,this.params.payment_order_type=t.select.payment_order_type,this.params.person_no=t.select.person.person_no,this.params.org_id=t.select.org.org_id,this.params.user_id=e.user_id,this.getShopcardCalcList()},gotoChooseCupboard:function(){this.$miRouter.push({path:"/pages_bundle/appoint/choose_cupboard",query:{data:JSON.stringify(this.stallIdList)}})}},onShow:function(){if(this.getInitParams(),this.$store.state.appoint.select.cupboard&&this.$store.state.appoint.select.cupboard.id){var e=this.$store.state.appoint.select.cupboard;e.ceil>0&&(this.cupboardId=e.id,this.cupboardName=e.addr)}},onLoad:function(){}};t.default=c},"5b77":function(e,t,a){"use strict";a.r(t);var r=a("dfeb"),o=a("3ced");for(var n in o)"default"!==n&&function(e){a.d(t,e,(function(){return o[e]}))}(n);a("8d08");var i,s=a("f0c5"),c=Object(s["a"])(o["default"],r["b"],r["c"],!1,null,"3d5ecab4",null,!1,r["a"],i);t["default"]=c.exports},"692e":function(e,t,a){var r=a("24fb");t=r(!1),t.push([e.i,'@charset "UTF-8";\n/* 颜色变量 */.confirm_order[data-v-3d5ecab4]{padding:%?40?%}.confirm_order .title[data-v-3d5ecab4]{position:relative;padding-left:%?24?%;padding-bottom:%?20?%}.confirm_order .title[data-v-3d5ecab4]::before{content:"";width:%?6?%;height:%?30?%;position:absolute;left:0;top:10%;background-color:#11e69e}.confirm_order .ls-card[data-v-3d5ecab4]{border-radius:%?20?%}.confirm_order .text-ash[data-v-3d5ecab4]{color:#9da2a7}.confirm_order .cupboard .cupboard-choose[data-v-3d5ecab4]{display:flex;justify-content:space-between;align-items:center;padding:%?30?%;margin-bottom:%?15?%;background-color:#fff;border-radius:%?20?%}.confirm_order .cupboard .text-ash[data-v-3d5ecab4]{color:#c0c4cc}.confirm_order .section[data-v-3d5ecab4]{padding-bottom:calc(%?100?% + env(safe-area-inset-bottom))}.confirm_order .section .order-list[data-v-3d5ecab4]{padding:0 %?36?%}.confirm_order .section .order-list .bb[data-v-3d5ecab4]{border-bottom:1px solid #efefef}.confirm_order .section .order-list > uni-view[data-v-3d5ecab4]{padding:%?30?% 0}.confirm_order .section .order-list .food > uni-view[data-v-3d5ecab4]:first-child{margin-top:0}.confirm_order .section .order-list .food .food-money-number[data-v-3d5ecab4]{width:%?240?%}.confirm_order .section .order-list .minus[data-v-3d5ecab4],\n.confirm_order .section .order-list .plus[data-v-3d5ecab4]{color:#11e69e;width:%?32?%;height:%?32?%;display:flex;justify-content:center;align-items:center;border:1px solid #11e69e;border-radius:%?4?%}.confirm_order .section .order-list .plus[data-v-3d5ecab4]{background-color:#11e69e;color:#fff;border-color:#11e69e}.confirm_order .section .order-list .input[data-v-3d5ecab4]{width:%?50?%}.confirm_order .footer[data-v-3d5ecab4]{width:100%;position:fixed;bottom:0;left:0;padding-left:%?38?%;border-top:1px solid #eaecee;padding-bottom:env(safe-area-inset-bottom)}.confirm_order .footer--warpper[data-v-3d5ecab4]{height:%?100?%}.confirm_order .footer .submit-btn[data-v-3d5ecab4]{width:%?200?%;height:100%;background-color:#11e69e}',""]),e.exports=t},"73f1":function(e,t,a){"use strict";var r=a("4ea4");Object.defineProperty(t,"__esModule",{value:!0}),t.apiShopcardReduceCount=t.apiShopcardAddCount=t.apiShopcardCalcList=t.apiShopcardList=t.apiShopcardDelete=t.apiShopcardClean=t.apiShopcardAdd=void 0;var o=r(a("3c62")),n=function(e){return o.default.post("/booking/shopcard/add",e)};t.apiShopcardAdd=n;var i=function(e){return o.default.post("/booking/shopcard/clean",e)};t.apiShopcardClean=i;var s=function(e){return o.default.post("/booking/shopcard/delete",e)};t.apiShopcardDelete=s;var c=function(e){return o.default.post("/booking/shopcard/list",e)};t.apiShopcardList=c;var d=function(e){return o.default.post("/booking/shopcard/calc_list",e)};t.apiShopcardCalcList=d;var u=function(e){return o.default.post("/booking/shopcard/add_count",e)};t.apiShopcardAddCount=u;var l=function(e){return o.default.post("/booking/shopcard/reduce_count",e)};t.apiShopcardReduceCount=l},"859d":function(e,t,a){"use strict";a.r(t);var r=a("d1bc"),o=a("91da");for(var n in o)"default"!==n&&function(e){a.d(t,e,(function(){return o[e]}))}(n);a("d6c5");var i,s=a("f0c5"),c=Object(s["a"])(o["default"],r["b"],r["c"],!1,null,"4e812804",null,!1,r["a"],i);t["default"]=c.exports},"8d08":function(e,t,a){"use strict";var r=a("1396"),o=a.n(r);o.a},"91da":function(e,t,a){"use strict";a.r(t);var r=a("09ef"),o=a.n(r);for(var n in r)"default"!==n&&function(e){a.d(t,e,(function(){return r[e]}))}(n);t["default"]=o.a},a2f9:function(e,t,a){"use strict";var r;a.d(t,"b",(function(){return o})),a.d(t,"c",(function(){return n})),a.d(t,"a",(function(){return r}));var o=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-uni-text",{class:(e.lineThrough?"line-through":"")+" price-format",style:{color:e.color,"font-weight":e.weight,"font-size":e.size+"rpx"}},[e.showSubscript?a("v-uni-text",{style:{"font-size":e.subscriptSize+"rpx","margin-right":"2rpx"}},[e._v("¥")]):e._e(),a("v-uni-text",[e._v(e._s(e.newPrice))])],1)},n=[]},d1bc:function(e,t,a){"use strict";a.d(t,"b",(function(){return o})),a.d(t,"c",(function(){return n})),a.d(t,"a",(function(){return r}));var r={uIcon:a("82f1").default},o=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-uni-view",{staticClass:"address-info"},[a("v-uni-view",{staticClass:"main ls-card",on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.$miRouter.push("/pages_bundle/select/select_address")}}},[a("v-uni-view",{staticClass:"flex row-between"},[a("v-uni-view",{},[e._t("title"),e._t("user-info")],2),a("u-icon",{attrs:{name:"arrow-right",size:"24rpx"}})],1)],1)],1)},n=[]},d6c5:function(e,t,a){"use strict";var r=a("47e3"),o=a.n(r);o.a},dfeb:function(e,t,a){"use strict";a.d(t,"b",(function(){return o})),a.d(t,"c",(function(){return n})),a.d(t,"a",(function(){return r}));var r={addressCard:a("859d").default,uIcon:a("82f1").default,priceFormat:a("1c7e3").default,numberBox:a("7837").default,uButton:a("15e4").default},o=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-uni-view",{staticClass:"confirm_order"},[e._e(),"cupboard"===e.params.take_meal_type?a("v-uni-view",{staticClass:"cupboard"},[a("v-uni-view",{staticClass:"cupboard-choose"},[a("v-uni-view",{staticClass:"m-r-30"},[e._v("存放餐柜：")]),a("v-uni-view",{staticClass:"flex",on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.gotoChooseCupboard.apply(void 0,arguments)}}},[e.cupboardName?a("v-uni-view",[e._v(e._s(e.cupboardName))]):a("v-uni-view",{staticClass:"text-ash"},[e._v("请选择餐柜")]),a("u-icon",{attrs:{color:"#767a7d",name:"arrow-right",size:"24rpx"}})],1)],1)],1):e._e(),a("v-uni-view",{staticClass:"section"},[e._l(e.cartLists,(function(t,r){return[a("v-uni-view",{key:r+"_0",staticClass:"title lg f-w-500 black m-t-30"},[e._v(e._s(t.date))]),a("v-uni-view",{key:r+"_1",staticClass:"order-list ls-card bg-white"},[e._l(t.stall,(function(r,o){return[a("v-uni-view",{key:o+"_0",staticClass:"bb flex row-between f-w-500"},[a("v-uni-text",{staticClass:"black line-1"},[e._v(e._s(r.stall_name))]),a("v-uni-text",{staticClass:"primary flex-none"},[e._v(e._s(r.meal_type_alias))])],1),a("v-uni-view",{key:o+"_1",staticClass:"food bb"},[e._l(r.food,(function(o,n){return[a("v-uni-view",{key:n+"_0",staticClass:"m-t-30 flex row-between f-w-500"},[a("v-uni-view",{staticClass:"black food-name line-1"},[e._v(e._s(o.food_name)),a("v-uni-text",{staticClass:"text-ash xs inline m-l-30"},[e._v(e._s(o.spec_name)+e._s(o.spec_name&&o.taste_name?"、":"")+e._s(o.taste_name))])],1),a("v-uni-view",{staticClass:"flex row-between food-money-number"},[a("price-format",{staticClass:"m-l-10",attrs:{price:o.spec_price,color:"#FF5757"}}),a("number-box",{attrs:{min:1,"async-change":!0},on:{change:function(a){arguments[0]=a=e.$handleEvent(a),e.cartCountChange(a,o,{date:t.date,meal_type:r.meal_type})}},model:{value:o.count,callback:function(t){e.$set(o,"count",t)},expression:"fitem.count"}})],1)],1)]}))],2),r.packing_fee||r.fuwu_fee?a("v-uni-view",{key:o+"_2",staticClass:"bb"},[r.packing_fee?a("v-uni-view",{staticClass:"flex row-between"},[a("v-uni-text",{staticClass:"muted"},[e._v("打包费：")]),a("price-format",{staticClass:"m-l-10",attrs:{price:r.packing_fee,size:32}})],1):e._e(),r.fuwu_fee?a("v-uni-view",{staticClass:"m-t-24 flex row-between"},[a("v-uni-text",{staticClass:"muted"},[e._v("服务费：")]),a("price-format",{staticClass:"m-l-10",attrs:{price:r.fuwu_fee,size:32}})],1):e._e()],1):e._e(),a("v-uni-view",{key:o+"_3",staticClass:"bb flex row-between"},[a("v-uni-view",{staticClass:"flex flex-center"},[a("v-uni-text",{staticClass:"muted m-r-10"},[e._v("份数：")]),a("number-box",{attrs:{min:1,"async-change":!0},on:{change:function(a){arguments[0]=a=e.$handleEvent(a),e.stallCountChange(a,{date:t.date,meal_type:r.meal_type,organization_id:r.stall_id,count:r.count})}},model:{value:r.count,callback:function(t){e.$set(r,"count",t)},expression:"sitem.count"}})],1),a("v-uni-view",{staticClass:"flex flex-center"},[a("v-uni-text",{staticClass:"muted m-r-20"},[e._v("合计")]),a("price-format",{attrs:{price:r.one_stall_fee,weight:500,size:34}})],1)],1)]}))],2)]}))],2),a("v-uni-view",{staticClass:"footer bg-white"},[a("v-uni-view",{staticClass:"footer--warpper flex row-between"},[a("v-uni-view",{staticClass:"muted flex col-center"},[a("v-uni-text",{staticClass:"m-r-20 md"},[e._v("合计")]),a("v-uni-view",{staticClass:"black"},[a("price-format",{attrs:{price:e.totalAmount,size:36,weight:500}})],1)],1),a("u-button",{attrs:{loading:e.loading,customStyle:{width:"240rpx",margin:0,"border-radius":0},type:"primary",color:"#11e69e",size:"large",text:"提交订单"},on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.onSubmitOrder.apply(void 0,arguments)}}})],1)],1)],1)},n=[]},fabe:function(e,t,a){var r=a("24fb");t=r(!1),t.push([e.i,'@charset "UTF-8";\n/* 颜色变量 */.address-info .ls-card[data-v-4e812804]{border-radius:%?20?%;background-color:#fff}.address-info .main[data-v-4e812804]{padding:%?40?% %?30?%;box-sizing:border-box}',""]),e.exports=t}}]);